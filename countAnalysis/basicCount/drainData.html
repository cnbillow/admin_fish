
    <title>捕鱼-流失数据</title>
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="../../layui/css/layui.css">
    <link rel="stylesheet" href="../../css/global.css">
    
<!-- jQuery -->
<!-- DataTables -->
 <!--第二步：添加如下 HTML 代码-->
    <!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.dataTables.min.css"/>

<link rel="stylesheet" type="text/css" href="../../css/fishing.css"/>
<!-- jQuery -->
<script type="text/javascript" charset="utf8" src="//code.jquery.com/jquery-1.12.4.js"></script>
<script type="text/javascript" src="../../layui/layui.js"></script>
<!-- DataTables -->
<!--第二步：添加如下 HTML 代码-->
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" charset="utf8" src="//cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" charset="utf8" src="//cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>

<div class='fishlog'>
	<div class="breadcrumb">
			<fieldset class="layui-elem-field layui-field-title" style="margin-top:10px;">
			  <legend>位置：
			  	<span class="layui-breadcrumb">
					  <a href="/">统计分析</a>
					  <a><cite>流失数据</cite></a>
					</span>
			  </legend>
			  
			</fieldset>
			<button class="dt-button buttons-excel buttons-html5 excelOut" tabindex="0" aria-controls="table_id_example"><span>导出Excel</span></button>
	</div>
	
	<div class="tabWrap">
		<div class="layui-form">
	  <table class="layui-table">
	    
	    <tbody>
	      <tr>
	        <td align="right">服务器</td>
	        <td>
	        	<input type="checkbox" name="S01" lay-skin="primary" title="S01" checked>
			    <input type="checkbox" name="S02" lay-skin="primary" title="S02">
			    <input type="checkbox" name="S03" lay-skin="primary" title="S03">
			    <input type="checkbox" name="S04" lay-skin="primary" title="S04">
			    <input type="checkbox" name="S05" lay-skin="primary" title="S05">
			    <input type="checkbox" name="S06" lay-skin="primary" title="S06">
			    <input type="checkbox" name="S07" lay-skin="primary" title="S07">
			    <br />
			     <button class="layui-btn layui-btn-radius chooseAll">全 选</button>
			     <button class="layui-btn layui-btn-primary layui-btn-radius cancelAll">取消</button>
	        </td>
	      </tr>
	      <tr>
	        <td align="right">选择时间</td>
	        <td>
		       <div class="layui-form-item">
			    <div class="layui-inline">
			      <div class="layui-input-inline" style="width: 200px;">
			      	<input class="layui-input" name="time_min" placeholder="开始时间" onclick="layui.laydate({elem: this, istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
			      </div>
			      <div class="layui-form-mid">——</div>
			      <div class="layui-input-inline" style="width: 200px;">
			      	<input class="layui-input" name="time_max" placeholder="结束时间" onclick="layui.laydate({elem: this, istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
			      </div>
			    </div>
			  </div>
	        </td>
	      </tr>
	      <tr>
	        <td align="right">流失时间</td>
	        <td>
			    <div class="layui-inline">
			      <div class="layui-input-inline" style="width: 200px;">
			      	<input class="layui-input" name="time_drain" placeholder="流失时间" onclick="layui.laydate({elem: this, istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
			      </div>
			    </div>
	        </td>
	      </tr>
	      <tr>
	        <td align="right">渠道选择</td>
	        <td> 
	        	 <div class="layui-inline">
			      <div class="layui-input-inline">
			        <select name="modules" lay-verify="required" lay-search="">
			          <option value="">全部</option>
			          <option value="1">layer</option>
			          <option value="2">form</option>
			          <option value="3">layim</option>
			          <option value="4">element</option>
			          <option value="5">laytpl</option>
			         
			        </select>
			      </div>
			    </div>
	        </td>
	      </tr>
	      <tr style="text-align: center;">
	        <td colspan="2"><button class="layui-btn">查 询</button></td>
	      </tr>
	      
	    </tbody>
	  </table>
	</div>
		<table id="table_id_example" class="display nowrap">
		    <thead>
		        <tr>
				      <th>玩家名</th> 
				      <th>平台</th> 
				      <th>设备号</th>
				      <th>CID</th> 
				      <th>UID</th>
				      <th>通行证</th> 
				      <th>平台账号</th> 
				      <th>VIP</th>
				      <th>金币</th> 
				      <th>钻石</th>
				      <th>话费</th> 
				      <th>等级</th> 
				      <th>注册时间</th>
				      <th>注册IP</th> 
				      <th>最近登录时间</th>
				      <th>最近登出时间</th> 
				      <th>最近登录IP</th>
				      <th>俱乐部</th> 
				      <th>封号状态</th>
				      <th>是否在线</th>
		        </tr>
		    </thead>
		    <tbody>
		        <tr align="center">
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		        </tr>
		        <tr align="center">
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		        </tr>
		        <tr align="center">
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		        </tr>
		        <tr align="center">
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		        </tr>
		        <tr align="center">
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		            <td>100001</td>
		            <td>哈哈</td>
		            <td>OneStore</td>
		            <td>深海遗迹</td>
		            <td>孙悟空</td>
		        </tr>
		        
		    </tbody>
		</table>
			
	</div>
	
</div>
	
<script>
<!--第三步：初始化Datatables-->
$(document).ready( function () {
	$('.chooseAll').click(function(){
		$('.tabWrap :checkbox').nextAll('.layui-unselect').addClass('layui-form-checked');//全选

	});
	$('.cancelAll').click(function(){
		$('.tabWrap :checkbox').nextAll('.layui-unselect').removeClass('layui-form-checked');//取消全选
	});
	
	$('#table_id_example').DataTable( {
        dom: 'Bfrtip',
        buttons: [ {
        	'text': '导出Excel',
            className: 'excelBtn',
            extend: 'excelHtml5',
            customize: function( xlsx ) {
                var sheet = xlsx.xl.worksheets['sheet1.xml'];
                $('row c[r^="C"]', sheet).attr( 's', '2' );
            }
            /*,'exportOptions': {  
	                   'modifier': {  
	                       'page': 'current'  
	                   }  
	               }*///导出当前页  
        } ],
       "paging":true,
       "searching":true,
       "responsive": true,
       "bLengthChange": true,
       "processing":true,
       "sPaginationType": "full_numbers",
       "lengthMenu": [[10, 20, 30, 50,-1], [10, 20, 30,50, "所有"]],
       "sDom": '<"top"fl>rt<"bottom"ip><"clear">',
       "oLanguage": {
            "sProcessing": "<img src='/images/datatable_loading.gif'>  努力加载数据中.",
            "sLengthMenu": "每页显示 _MENU_ 条记录",
            "sZeroRecords": "抱歉， 没有找到",
            "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
            "sInfoEmpty": "没有数据",
            "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
            "sZeroRecords": "没有检索到数据",
            "sSearch": "模糊查询:  ",
            "oPaginate": {
                "sFirst": "首页",
                "sPrevious": "前一页",
                "sNext": "后一页",
                "sLast": "尾页"
            }
        }
        
    });
    $('.excelOut').click(function(){
    		$('.excelBtn').click();
    })
    
} );
/*//l- 每页显示数量
//f - 过滤输入
//t - 表单Table
//i - 信息
//p - 翻页
//r - pRocessing
//< and > - div elements
//<"class" and > - div with a class
//Examples: <"wrapper"flipt>, <lf<t>ip>*/


layui.use('element', function(){
  var element = layui.element(); //导航的hover效果、二级菜单等功能，需要依赖element模块
  
  //监听导航点击
  element.on('nav(demo)', function(elem){
    //console.log(elem)
    layer.msg(elem.text());
  });
});

layui.use(['form', 'layedit', 'laydate'], function(){
  var form = layui.form()
  ,layer = layui.layer
  ,layedit = layui.layedit
  ,laydate = layui.laydate;
  
  //创建一个编辑器
  var editIndex = layedit.build('LAY_demo_editor');
 
  //自定义验证规则
  form.verify({
    title: function(value){
      if(value.length < 5){
        return '标题至少得5个字符啊';
      }
    }
    ,pass: [/(.+){6,12}$/, '密码必须6到12位']
    ,content: function(value){
      layedit.sync(editIndex);
    }
  });
  
  //监听指定开关
  form.on('switch(switchTest)', function(data){
    layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {
      offset: '6px'
    });
    layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
  });
  
  //监听提交
  form.on('submit(demo1)', function(data){
    layer.alert(JSON.stringify(data.field), {
      title: '最终的提交信息'
    })
    return false;
  });
  
  /*日历插件触发*/
 layui.use('laydate', function(){
  var laydate = layui.laydate;
  
  var start = {
    min: laydate.now()
    ,max: '2099-06-16 23:59:59'
    ,istoday: false
    ,choose: function(datas){
      end.min = datas; //开始日选好后，重置结束日的最小日期
      end.start = datas //将结束日的初始值设定为开始日
    }
  };
  
  var end = {
    min: laydate.now()
    ,max: '2099-06-16 23:59:59'
    ,istoday: false
    ,choose: function(datas){
      start.max = datas; //结束日选好后，重置开始日的最大日期
    }
  };
  
  
});
  
});
</script>

